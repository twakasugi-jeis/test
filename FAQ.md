# FAQ

---

### **Q1**  
オンプレミスやIaaSのサーバはセキュリティポリシーに従って年4回（または年1回）セキュリティパッチやミドルウェアの更新が大変です。どう改善できますか？

**A1**  
PaaSサービスへの移行を検討することで運用負荷を軽減できます。  
特にインターネット公開されているサーバーのPaaSへの移行は年4回のパッチ適用が不要になるため効果が高いと思います。  
PaaS化に関する検討は、**クラウドネイティブ移行検討ガイド**他、各種ガイドをご確認ください。

---

### **Q2**  
保守端末でアプリケーションをビルドし、リリース作業を手動で行っている。各サーバに配置する必要があり、数が多くて大変です。

**A2**  
Azure DevOpsのPipelineやGithub EnterpriseのGithub Actionsを活用してリリース作業（ビルド及びデプロイ作業）を自動化することが可能です。  
Azure DevOpsでのリリース作業の自動化手順については、**ソース管理システム利用ガイド**で解説しています。

---

### **Q3**  
アプリケーションやサーバのログを定期的に収集するための運用作業が発生しているが、この負荷を軽減する方法はあるか？

**A3**  
Azure上にシステムを構築している場合、監視・分析に必要なアプリケーションのログを**Application Insights**へ、サーバのメトリックログを**Log Analytics**へ保存することで、物理的なログファイルのローテーションの関係で定期的にログを退避させるといった運用がなくなります。  
Application InsightsやLog Analyticsの解説は「**Azureリファレンスアーキテクチャガイド**」をご確認ください。  
また、アプリケーションのログをApplication Insightsに出力するための設定については、「**App Service向け.NET Frameworkのアプリケーション実装ガイド**」に掲載しています。

---

### **Q4**  
Azure基盤側のメンテナンスによる再起動や瞬断によるシステムへの影響が懸念されます。どのように対応するべきですか。

**A4**  
以下の2点がポイントになります。  

① **SLAを考慮した最小限のシステム構成（インフラ観点）**  
Azureの場合、アベイラビリティゾーン（AZ）による冗長構成を組むための仕組みがありますので、システムのSLAに応じて必要な構成を選択する必要があります。  
JEISのSLAクラス定義に対応したAzureにおける冗長構成の考え方及び対応については、「**パブリッククラウド共通基盤（サーバ構築自動化）システム導入ガイドライン**」の「**別紙3_クラス定義別デザインパターン**」をご確認ください。  

② **瞬断等を考慮したアプリケーションの実装（アプリ観点）**  
Azure基盤側のメンテナンスでは、再起動を伴わない数秒の一時停止によるメンテナンスも行われます。再起動は伴わないメンテナンスでも、ネットワークレベルでの瞬断が発生することがあります。そのため、アプリケーションの設計としてそれらの想定をしておく必要があります。  
「**クラウドネイティブ移行検討ガイド**」や「**クラウドネイティブアプリケーション開発ガイド**」にてアプリケーション側の対策方針や具体的な対策方法を解説しています。

---

### **Q5**  
Azure基盤側の障害による影響なのか、自分たちのシステムやアプリケーション起因のバグや障害なのかの切り分けを行うためのノウハウが知りたいです。

**A5**  
障害発生から問題の切り分けや対応フロー、それらに必要なログの確認等について、IaaS/PaaS含めて「**トラブルシューティングガイド**」にて解説しています。  
詳細は「**トラブルシューティングガイド**」の3～4章をご確認ください。

---

### **Q6**  
専用線やプライベートエンドポイント等を活用して、Azure上のリソースに閉域接続する場合、パブリックアクセスではないためグローバルなDNSサーバで直接名前解決ができません。閉域接続を前提とした、Azureのリソースへの名前解決をするためにはどうすればよいですか。

**A6**  
オンプレミスーAzureを専用線等で閉域接続している環境において、システム内部の名前解決を行うために、オンプレミスのDNSとAzureのDNSを連携する「**Azure DNS Private Resolver**」という機能があります。  
詳細は、全社公開している「**02_JEIS Azure（IaaS・PaaS）開発ガイドライン**」の「**資料1_クラウド移行時のシステム構成パターン**」をご確認ください。  
なお、Joi-Net端末等で名前解決が必要な場合は、Joi-Net担当へDNSレコードの登録を依頼する必要があります。

---

### **Q7**  
Azure基盤側の計画メンテナンスに関する情報をAzureから知得したいです。事前に行っておいた方が良い設定はありますか。

**A7**  
Azure Monitorのアラートの設定から、「**サービス正常性アラートの追加**」等を行う必要があります。  
詳しくは、「**トラブルシューティングガイド**」の2章をご確認ください。

---

### **Q8**  
Azureサービスの更新情報を定期的に確認したいです。おすすめの方法やサイトのリンクはありますか。

**A8**  
Azureサービスの更新情報は、以下のサイトに掲載されています。  
[https://azure.microsoft.com/ja-jp/updates/?updateType=retirements](https://azure.microsoft.com/ja-jp/updates/?updateType=retirements)  
また、ソフトウェア基盤PJにて月1回開催している「クラウド・ソフトウェア技術共有会」にて、これらの情報からJEISの開発・運用に関係しそうな内容や、JEISで特に利用が多いAzureサービスを中心にピックアップしたものを「Azure New Topics」として毎月紹介しています。
